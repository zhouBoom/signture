<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨æ€ç­¾åéªŒè¯ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="/src/styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">
                    <span class="logo-icon">âœï¸</span>
                    ç­¾åéªŒè¯ç³»ç»Ÿ
                </h1>
                <nav class="nav">
                    <a href="#" class="nav-link active" data-page="home">é¦–é¡µ</a>
                    <a href="#" class="nav-link" data-page="management">ç­¾åç®¡ç†</a>
                    <a href="#" class="nav-link" data-page="settings">ç³»ç»Ÿè®¾ç½®</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="section intro">
                <h2 class="section-title">åŸºäºæ¨¡å¼è¯†åˆ«çš„åŠ¨æ€ç­¾åéªŒè¯</h2>
                <p class="section-desc">åˆ©ç”¨å…ˆè¿›çš„æ¨¡å¼è¯†åˆ«æŠ€æœ¯ï¼Œå®ç°æ‰‹å†™ç­¾åçš„è‡ªåŠ¨åŒ–è¯†åˆ«ä¸çœŸä¼ªé‰´åˆ«</p>
            </div>

            <div class="content-grid">
                <div class="left-panel">
                    <div class="card">
                        <h3 class="card-title">
                            <span class="card-icon">ğŸ“</span>
                            ç­¾åè¾“å…¥åŒºåŸŸ
                        </h3>
                        <div class="canvas-container">
                            <canvas id="signatureCanvas" width="500" height="300"></canvas>
                            <div class="canvas-placeholder" id="canvasPlaceholder">è¯·åœ¨ä¸Šæ–¹ç»˜åˆ¶æ‚¨çš„ç­¾å</div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" id="clearBtn">æ¸…é™¤ç­¾å</button>
                            <button class="btn btn-secondary" id="verifyBtn">éªŒè¯ç­¾å</button>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">
                            <span class="card-icon">âš™ï¸</span>
                            éªŒè¯å‚æ•°
                        </h3>
                        <div class="form-group">
                            <label for="threshold">åŒ¹é…é˜ˆå€¼:</label>
                            <input type="range" id="threshold" min="0" max="100" value="85">
                            <span class="range-value" id="thresholdValue">85%</span>
                        </div>
                        <div class="form-group">
                            <label for="mode">éªŒè¯æ¨¡å¼:</label>
                            <select id="mode">
                                <option value="dynamic">åŠ¨æ€æ¨¡å¼</option>
                                <option value="static">é™æ€æ¨¡å¼</option>
                                <option value="hybrid">æ··åˆæ¨¡å¼</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="right-panel">
                    <div class="card">
                        <h3 class="card-title">
                            <span class="card-icon">ğŸ“Š</span>
                            éªŒè¯ç»“æœ
                        </h3>
                        <div class="result-area" id="resultArea">
                            <div class="result-placeholder">ç­‰å¾…éªŒè¯...</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">
                            <span class="card-icon">ğŸ”</span>
                            è¯†åˆ«ç‰¹å¾
                        </h3>
                        <div class="features" id="features">
                            <div class="feature-item">
                                <span class="feature-label">ç¬”ç”»é€Ÿåº¦:</span>
                                <span class="feature-value" id="strokeSpeed">-</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-label">ç¬”ç”»å‹åŠ›:</span>
                                <span class="feature-value" id="strokePressure">-</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-label">ç¬”ç”»é¡ºåº:</span>
                                <span class="feature-value" id="strokeOrder">-</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-label">ç­¾åæ—¶é•¿:</span>
                                <span class="feature-value" id="signDuration">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">
                            <span class="card-icon">ğŸ“‹</span>
                            æœ€è¿‘éªŒè¯è®°å½•
                        </h3>
                        <div class="records">
                            <div class="record-item">
                                <span class="record-time">2025-12-23 14:30</span>
                                <span class="record-result success">é€šè¿‡</span>
                            </div>
                            <div class="record-item">
                                <span class="record-time">2025-12-23 14:25</span>
                                <span class="record-result failed">æœªé€šè¿‡</span>
                            </div>
                            <div class="record-item">
                                <span class="record-time">2025-12-23 14:20</span>
                                <span class="record-result success">é€šè¿‡</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>Â© 2025 åŠ¨æ€ç­¾åéªŒè¯ç³»ç»Ÿ | åŸºäºæ¨¡å¼è¯†åˆ«æŠ€æœ¯</p>
            </div>
        </div>
    </footer>

    <script>
        // Toast é€šçŸ¥ç³»ç»Ÿ
        function showToast(message, type = 'info', title = '') {
            const toastIcons = {
                info: 'â„¹ï¸',
                success: 'âœ…',
                warning: 'âš ï¸',
                error: 'âŒ'
            };

            const toastTitles = {
                info: 'æç¤º',
                success: 'æˆåŠŸ',
                warning: 'è­¦å‘Š',
                error: 'é”™è¯¯'
            };

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <span class="toast-icon">${toastIcons[type]}</span>
                <div class="toast-content">
                    <div class="toast-title">${title || toastTitles[type]}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">Ã—</button>
            `;

            document.body.appendChild(toast);

            // è‡ªåŠ¨å…³é—­
            setTimeout(() => {
                toast.classList.add('hiding');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // å¯¼èˆªé“¾æ¥å¤„ç†
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                const page = e.currentTarget.dataset.page;
                if (page !== 'home') {
                    e.preventDefault();
                    const pageNames = {
                        'management': 'ç­¾åç®¡ç†',
                        'history': 'å†å²è®°å½•',
                        'settings': 'ç³»ç»Ÿè®¾ç½®'
                    };
                    showToast(`"${pageNames[page]}"åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼`, 'info', 'åŠŸèƒ½æç¤º');
                }
            });
        });

        // ç­¾åç»˜åˆ¶åŠŸèƒ½
        const canvas = document.getElementById('signatureCanvas');
        const ctx = canvas.getContext('2d');
        const placeholder = document.getElementById('canvasPlaceholder');
        let isDrawing = false;
        let startTime = null;
        let strokeCount = 0;
        let totalDistance = 0;
        let lastPoint = null;

        ctx.lineWidth = 3;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.strokeStyle = '#1a202c';

        // é¼ æ ‡äº‹ä»¶
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // è§¦æ‘¸äº‹ä»¶
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startDrawing(e);
        });
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            draw(e);
        });
        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            stopDrawing(e);
        });

        function getCoordinates(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;

            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;

            return {
                x: (clientX - rect.left) * scaleX,
                y: (clientY - rect.top) * scaleY
            };
        }

        function startDrawing(e) {
            isDrawing = true;
            const coords = getCoordinates(e);

            if (!startTime) {
                startTime = Date.now();
            }

            strokeCount++;
            lastPoint = coords;

            ctx.beginPath();
            ctx.moveTo(coords.x, coords.y);
            placeholder.style.display = 'none';

            updateFeatures();
        }

        function draw(e) {
            if (!isDrawing) return;

            const coords = getCoordinates(e);

            // è®¡ç®—è·ç¦»
            if (lastPoint) {
                const dx = coords.x - lastPoint.x;
                const dy = coords.y - lastPoint.y;
                totalDistance += Math.sqrt(dx * dx + dy * dy);
            }

            ctx.lineTo(coords.x, coords.y);
            ctx.stroke();

            lastPoint = coords;
            updateFeatures();
        }

        function stopDrawing() {
            if (!isDrawing) return;
            isDrawing = false;
            ctx.closePath();
            lastPoint = null;
        }

        function updateFeatures() {
            const duration = startTime ? ((Date.now() - startTime) / 1000).toFixed(2) : 0;
            const speed = duration > 0 ? (totalDistance / duration).toFixed(1) : 0;
            const pressure = (Math.random() * 30 + 70).toFixed(1); // æ¨¡æ‹Ÿå‹åŠ›å€¼

            document.getElementById('strokeSpeed').textContent = `${speed} px/s`;
            document.getElementById('strokePressure').textContent = `${pressure}%`;
            document.getElementById('strokeOrder').textContent = strokeCount;
            document.getElementById('signDuration').textContent = `${duration}s`;
        }

        function resetFeatures() {
            document.getElementById('strokeSpeed').textContent = '-';
            document.getElementById('strokePressure').textContent = '-';
            document.getElementById('strokeOrder').textContent = '-';
            document.getElementById('signDuration').textContent = '-';
        }

        // æ¸…é™¤ç­¾å
        document.getElementById('clearBtn').addEventListener('click', () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            placeholder.style.display = 'block';
            startTime = null;
            strokeCount = 0;
            totalDistance = 0;
            lastPoint = null;
            resetFeatures();
            showToast('ç­¾åå·²æ¸…é™¤', 'success');
        });

        // éªŒè¯ç­¾å
        document.getElementById('verifyBtn').addEventListener('click', () => {
            // æ£€æŸ¥æ˜¯å¦æœ‰ç­¾å
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const hasSignature = imageData.data.some((channel, index) => {
                return index % 4 === 3 && channel !== 0; // æ£€æŸ¥alphaé€šé“
            });

            if (!hasSignature) {
                showToast('è¯·å…ˆç»˜åˆ¶ç­¾ååå†è¿›è¡ŒéªŒè¯', 'warning', 'éªŒè¯å¤±è´¥');
                return;
            }

            const resultArea = document.getElementById('resultArea');
            const threshold = document.getElementById('threshold').value;
            const mode = document.getElementById('mode').value;

            // æ¨¡æ‹ŸéªŒè¯è¿‡ç¨‹
            resultArea.innerHTML = '<div class="result-placeholder">æ­£åœ¨éªŒè¯ä¸­...</div>';

            setTimeout(() => {
                const matchScore = Math.floor(Math.random() * 25 + 70);
                const result = matchScore >= threshold ? 'success' : 'failed';
                const message = result === 'success' ? 'ç­¾åéªŒè¯é€šè¿‡ï¼' : 'ç­¾åéªŒè¯æœªé€šè¿‡ï¼';

                resultArea.innerHTML = `
                    <div class="result ${result}">
                        <div class="result-icon">${result === 'success' ? 'âœ…' : 'âŒ'}</div>
                        <div class="result-text">${message}</div>
                        <div class="result-score">åŒ¹é…åº¦: ${matchScore}% (é˜ˆå€¼: ${threshold}%)</div>
                        <div class="result-score">éªŒè¯æ¨¡å¼: ${getModeText(mode)}</div>
                    </div>
                `;

                showToast(message, result === 'success' ? 'success' : 'error', 'éªŒè¯å®Œæˆ');
            }, 1000);
        });

        function getModeText(mode) {
            const modes = {
                'dynamic': 'åŠ¨æ€æ¨¡å¼',
                'static': 'é™æ€æ¨¡å¼',
                'hybrid': 'æ··åˆæ¨¡å¼'
            };
            return modes[mode] || mode;
        }

        // é˜ˆå€¼æ»‘å—
        const threshold = document.getElementById('threshold');
        const thresholdValue = document.getElementById('thresholdValue');
        threshold.addEventListener('input', () => {
            thresholdValue.textContent = `${threshold.value}%`;
        });

        // éªŒè¯æ¨¡å¼æ”¹å˜æç¤º
        document.getElementById('mode').addEventListener('change', (e) => {
            const modeText = getModeText(e.target.value);
            showToast(`å·²åˆ‡æ¢åˆ°${modeText}`, 'info', 'æ¨¡å¼åˆ‡æ¢');
        });

        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.addEventListener('load', () => {
            setTimeout(() => {
                showToast('æ¬¢è¿ä½¿ç”¨åŠ¨æ€ç­¾åéªŒè¯ç³»ç»Ÿï¼', 'success', 'æ¬¢è¿');
            }, 500);
        });
    </script>
</body>

</html>